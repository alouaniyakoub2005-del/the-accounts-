<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title></title></title>موقع Jakob للحساب</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-url: url('https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1920&q=80');
      --card-bg: rgba(255,255,255,0.10);
      --card-stroke: rgba(255,255,255,0.25);
      --text: #ffffff;
      --muted: rgba(255,255,255,0.75);
      --accent: #d4af37;
      --accent-2: #9c7a22;
      --error: #ffd1d1;
    }

    *{ box-sizing: border-box; }
    html, body{ height:100%; margin:0; font-family: "Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: var(--text); }
    body{
      background-image: var(--bg-url);
      background-size: cover;
      background-position: center;
      position: relative;
      overflow: hidden;
    }
    body::before{
      content:"";
      position: absolute;
      inset:0;
      background: radial-gradient(1200px 700px at 80% -10%, rgba(212,175,55,0.25), transparent 60%),
                  linear-gradient(to bottom right, rgba(0,0,0,0.55), rgba(0,0,0,0.65));
      z-index:0;
      pointer-events: none; /* <<< مهم: لا تعترض نقرات المستخدم */
    }

    .wrap{ position: relative; z-index:1; display:flex; align-items:center; justify-content:center; min-height:100%; padding: 24px; }

    .card{
      width: min(96vw, 520px);
      background: var(--card-bg);
      border: 1px solid var(--card-stroke);
      border-radius: 24px;
      backdrop-filter: blur(14px) saturate(120%);
      -webkit-backdrop-filter: blur(14px) saturate(120%);
      padding: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
      position: relative;
      overflow: hidden;
    }
    .card::before{
      content:"";
      position:absolute; inset:-1px;
      border-radius: 24px;
      padding:1px;
      background: linear-gradient(135deg, rgba(212,175,55,0.55), rgba(255,255,255,0.2), rgba(156,122,34,0.55));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;
      pointer-events: none; /* <<< هنا أيضاً: لا تعترض النقر */
    }

    .title{ display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:0.3px; margin-bottom: 8px; font-size: 1.5rem; }
    .subtitle{ color: var(--muted); margin-bottom: 18px; font-weight:300; font-size: 0.95rem; }

    .inputs{ display:grid; grid-template-columns: 1fr; gap:12px; margin-bottom: 14px; }
    .row{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }

    .field input{
      width:100%;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      font-size: 1rem;
      outline:none;
      transition: border-color .2s, transform .06s ease;
    }
    .field input::placeholder{ color: rgba(255,255,255,0.55); }
    .field input:focus{
      border-color: var(--accent);
      transform: translateY(-1px);
      box-shadow: 0 0 0 3px rgba(212,175,55,0.18);
    }

    .ops{ display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; margin: 6px 0 12px; }
    .btn{
      cursor:pointer;
      border:none;
      padding: 12px 10px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(212,175,55,0.9), rgba(156,122,34,0.9));
      color:#1b1b1b;
      font-weight:700;
      letter-spacing:.5px;
      transition: transform .06s ease, filter .2s ease, box-shadow .2s;
      box-shadow: 0 8px 18px rgba(212,175,55,0.35);
      position: relative;
      z-index: 1;
    }
    .btn:hover{ filter: brightness(1.05); }
    .btn:active{ transform: translateY(1px); }

    .result{ margin-top: 6px; padding: 14px; border-radius: 14px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.2); }
    .result label{ display:block; color: var(--muted); font-size:.95rem; margin-bottom:6px; }
    .result .value{ font-size: 1.65rem; font-weight:700; line-height:1.2; word-wrap:anywhere; text-shadow: 0 2px 12px rgba(0,0,0,0.35); }

    .helper{ margin-top:10px; font-size:.9rem; color: var(--muted); }
    .error{ color: var(--error); font-weight:500; }

    @media (max-width:480px){
      .row{ grid-template-columns: 1fr; }
      .ops{ grid-template-columns: repeat(4, 1fr); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="region" aria-label="آلة حاسبة راقية">
      <div class="title">آلة حاسبة من Jakob</div>
      <div class="subtitle">أدخل رقمين ثم اختر العملية: جمع (+)، طرح (−)، ضرب (×)، قسمة (÷).</div>

      <div class="inputs">
        <div class="row">
          <div class="field">
            <input id="a" type="number" step="any" placeholder="العدد الأول (مثال: 12.5)" aria-label="العدد الأول">
          </div>
          <div class="field">
            <input id="b" type="number" step="any" placeholder="العدد الثاني (مثال: 3.4)" aria-label="العدد الثاني">
          </div>
        </div>
      </div>

      <div class="ops" aria-label="أزرار العمليات">
        <!-- type="button" مضاف لضمان سلوك متوقع -->
        <button type="button" class="btn" data-op="+">+</button>
        <button type="button" class="btn" data-op="-">−</button>
        <button type="button" class="btn" data-op="*">×</button>
        <button type="button" class="btn" data-op="/">÷</button>
      </div>

      <div class="result" aria-live="polite">
        <label>النتيجة:</label>
        <div id="out" class="value">—</div>
        <div id="msg" class="helper"></div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const aEl = document.getElementById('a');
      const bEl = document.getElementById('b');
      const out = document.getElementById('out');
      const msg = document.getElementById('msg');
      let lastOp = '+'; // يمكنك تغييره إلى null لو أردت ألا تُحسب النتيجة تلقائياً

      const fmt = (n) => {
        if (!isFinite(n)) return String(n);
        const s = n.toFixed(8).replace(/\.?0+$/,'');
        return s === '-0' ? '0' : s;
      };

      const calc = (op) => {
        lastOp = op;
        msg.textContent = '';
        msg.classList.remove('error');

        const a = parseFloat((aEl.value||'').replace(',', '.'));
        const b = parseFloat((bEl.value||'').replace(',', '.'));

        if (Number.isNaN(a) || Number.isNaN(b)) {
          out.textContent = '—';
          msg.textContent = 'يرجى إدخال رقمين صالحين (يمكن استخدام الكسور العشرية).';
          msg.classList.add('error');
          return;
        }

        let r;
        switch(op){
          case '+': r = a + b; break;
          case '-': r = a - b; break;
          case '*': r = a * b; break;
          case '/':
            if (b === 0) {
              out.textContent = '—';
              msg.textContent = 'لا يمكن القسمة على صفر.';
              msg.classList.add('error');
              return;
            }
            r = a / b; break;
          default: r = NaN;
        }
        out.textContent = fmt(r);
      };

      // أحداث الأزرار
      document.querySelectorAll('.btn').forEach(btn=>{
        btn.addEventListener('click', () => calc(btn.dataset.op));
      });

      // دعم لوحة المفاتيح: Enter = آخر عملية، والرموز مباشرة
      const keyMap = { '+':'+', '-':'-', '*':'*', 'x':'*', 'X':'*', '/':'/' };
      document.addEventListener('keydown', (e)=>{
        if (e.key === 'Enter') { if (lastOp) calc(lastOp); }
        else if (keyMap[e.key]) { calc(keyMap[e.key]); }
      });

      // حساب مباشر عند تغيير الحقول (إن كانت القيم موجودة)
      [aEl, bEl].forEach(el => el.addEventListener('input', ()=> {
        if (aEl.value !== '' && bEl.value !== '' && lastOp) calc(lastOp);
      }));
    })();
  </script>
</body>
</html>
